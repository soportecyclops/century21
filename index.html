<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C21 CRM — Gestión de Clientes</title>
    <link rel="stylesheet" href="styles.css">

    <!-- SUPABASE CDN v2 -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
</head>

<body>

    <!-- LOGIN VIEW -->
    <section id="login-view" class="auth-container hidden">
        <div class="auth-box">
            <h2 class="logo">CENTURY <span>21</span></h2>
            <h3 class="subtitle">Panel de Gestión</h3>

            <form id="login-form">
                <div class="field">
                    <label>Email</label>
                    <input type="email" id="login-email" autocomplete="email" required>
                </div>

                <div class="field">
                    <label>Contraseña</label>
                    <input type="password" id="login-password" autocomplete="current-password" required>
                </div>

                <button class="btn-gold" type="submit">Ingresar</button>
                <p class="feedback" id="login-feedback"></p>
            </form>
        </div>
    </section>

    <!-- DASHBOARD VIEW -->
    <section id="dashboard-view" class="dashboard hidden">
        <header class="topbar">
            <h1 class="topbar-title">CRM de Clientes</h1>
            <button id="btn-logout" class="btn-black">Cerrar Sesión</button>
        </header>

        <main class="content">

            <!-- Formulario -->
            <section class="card">
                <h2>Agregar / Editar Cliente</h2>

                <form id="client-form">
                    <input type="hidden" id="client-id">

                    <div class="grid-2">
                        <div class="field">
                            <label>Nombre</label>
                            <input type="text" id="nombre" required>
                        </div>

                        <div class="field">
                            <label>Email</label>
                            <input type="email" id="email" required>
                        </div>

                        <div class="field">
                            <label>Celular</label>
                            <input type="text" id="celular" required>
                        </div>

                        <div class="field">
                            <label>Empresa</label>
                            <input type="text" id="empresa">
                        </div>

                        <div class="field">
                            <label>Estado</label>
                            <select id="estado">
                                <option value="nuevo">Nuevo</option>
                                <option value="contactado">Contactado</option>
                                <option value="seguimiento">Seguimiento</option>
                                <option value="cerrado">Cerrado</option>
                            </select>
                        </div>

                        <div class="field">
                            <label>Interés</label>
                            <input type="text" id="interes">
                        </div>
                    </div>

                    <button class="btn-gold w-full" type="submit">Guardar Cliente</button>
                    <p class="feedback" id="form-feedback"></p>
                </form>
            </section>

            <!-- Buscador -->
            <section class="card">
                <div class="search-row">
                    <input id="search" type="text" placeholder="Buscar cliente...">
                    <button id="btn-refresh" class="btn-black">Actualizar</button>
                </div>
            </section>

            <!-- Tabla -->
            <section class="card">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Celular</th>
                                <th>Empresa</th>
                                <th>Estado</th>
                                <th>Interés</th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody id="client-list"></tbody>
                    </table>
                </div>
            </section>

        </main>
    </section>

    <script src="app.js"></script>
</body>
</html>
